<!DOCTYPE html>
<html>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://cdn.socket.io/3.1.3/socket.io.min.js"></script>
<script type="text/javascript" charSet="utf-8">
    $(document).ready(function () {
        const socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.on('mqtt_message', (data) => {
            const text = '(' + data['topic'] + ' qos: ' + data['qos'] + ') ' + data['payload'];
            // update chart here...
            $('#subscribe_messages').append(text + '<br/><br/>');
        })
    });
</script>
<div id="subscribe_messages"></div>
<head>
    <meta charset="UTF-8">
    <title>Device Location</title>
    <style>
        #box {
            width: 510px;
            height: 510px;
            border: 1px solid black;
            position: relative;
            left: 500px;

            top: 200px;
        }

        #marker {
            width: 10px;
            height: 10px;
            background-color: green;
            border-radius: 50%;
            position: absolute;

            left: {{y}}px;

            top: {{x}}px;
        }

        #AP1 {
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            position: absolute;

            left: {{APs["AP1"]['x']}}px;

            top: {{APs["AP1"]['y']}}px;
        }

        #AP2 {
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            position: absolute;

            left: {{APs["AP2"]['x']}}px;

            top: {{APs["AP2"]['y']}}px;
        }

        #AP3 {
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            position: absolute;

            left: {{APs["AP3"]['x']}}px;

            top: {{APs["AP3"]['y']}}px;
        }

        #AP4 {
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 200%;
            position: absolute;

            left: {{APs["AP4"]['x']}}px;

            top: {{APs["AP4"]['y']}}px;
        }

        .ap-circle {
            border: 3px dashed gray;
            border-radius: 100%;
            position: absolute;
        }
    </style>
</head>

<body>
    <div id="box">
        <div id="AP1"></div>
        <div id="AP2"></div>
        <div id="AP3"></div>
        <div id="AP4"></div>
        <div id="marker"></div>
<script>
      var socket = io();
      socket.on('my-state-update', function(data) {
        $('#marker').css('top', data.x);
        $('#marker').css('left', data.y);
      });
    </script>
</body>

</html>

